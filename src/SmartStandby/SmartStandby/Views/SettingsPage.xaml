<Page
    x:Class="SmartStandby.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SmartStandby.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" Padding="24">
        <StackPanel Spacing="20">
            <TextBlock Text="Settings" Style="{ThemeResource TitleTextBlockStyle}"/>

            <!-- Toggles -->
            <StackPanel Spacing="10">
                <TextBlock Text="Behavior" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                <ToggleSwitch Header="Disconnect Network on Sleep" IsOn="{Binding EnableNetworkDisconnect}" OnContent="Enabled" OffContent="Disabled"/>
                <ToggleSwitch Header="Apply TDR Patch (Fix Black Screen)" IsOn="{Binding EnableTdrPatch}" OnContent="Enabled" OffContent="Disabled"/>
            </StackPanel>

            <!-- Whitelist -->
            <StackPanel Spacing="10">
                <TextBlock Text="Process Whitelist" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                <TextBlock Text="Processes in this list will NOT be killed." Foreground="Gray" FontSize="12"/>
                
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <TextBox Text="{Binding NewProcessName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" PlaceholderText="e.g. steam.exe" Width="200"/>
                    <Button Command="{Binding AddWhitelistCommand}" Content="Add"/>
                </StackPanel>

                <ListView ItemsSource="{Binding WhitelistProcesses}" Height="200" BorderThickness="1" BorderBrush="#33000000" CornerRadius="4">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="x:String">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{x:Bind}" VerticalAlignment="Center"/>
                                <Button Grid.Column="1" Command="{Binding ElementName=RootPage, Path=ViewModel.RemoveWhitelistCommand}" CommandParameter="{x:Bind}" Content="Remove" FontSize="10" Margin="0,0,10,0"/>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackPanel>

            <!-- Actions -->
            <Button Command="{Binding SaveSettingsCommand}" Content="Save Configuration" HorizontalAlignment="Right"/>
        </StackPanel>
    </Grid>
</Page>
